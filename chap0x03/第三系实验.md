# 第三系实验

## 一、实验目的

1、学习systemed，利用asciinama 上传自己动手完成的systemed操作全程录像

2、在自己仓库新建makedown纯文本，附上asciinema的分享链接

3、完成第三章自查清单

## 二、实验环境

1、Ubuntu 20.04 Linux

2、Windows 10

3、asciinema

## 三、实验步骤

1、打开asciinema官网，登录自己账号，在主机终端连接asciinema库

2、Systemed入门篇学习

1&2：[![asciicast](https://asciinema.org/a/mqHxDDx4PPNZq6AYFAC4ed7IQ.svg)](https://asciinema.org/a/mqHxDDx4PPNZq6AYFAC4ed7IQ)

3：[![asciicast](https://asciinema.org/a/7xseZDCXwYUmKtQoDcyRRHcPx.svg)](https://asciinema.org/a/7xseZDCXwYUmKtQoDcyRRHcPx)

4： [![asciicast](https://asciinema.org/a/ooWuRIWzZ4RtjzrtJnsxHUEGX.svg)](https://asciinema.org/a/ooWuRIWzZ4RtjzrtJnsxHUEGX) & [![asciicast](https://asciinema.org/a/05XGwdtVDnELbho8i7xBC8r9Y.svg)](https://asciinema.org/a/05XGwdtVDnELbho8i7xBC8r9Y)

5： [![asciicast](https://asciinema.org/a/cJpB2EfDoCcb3rbR9iXvnY4WM.svg)](https://asciinema.org/a/cJpB2EfDoCcb3rbR9iXvnY4WM)

6：[![asciicast](https://asciinema.org/a/z8fDu3J1tonhoRgULOgE2Vvov.svg)](https://asciinema.org/a/z8fDu3J1tonhoRgULOgE2Vvov)

7： [![asciicast](https://asciinema.org/a/dZOKxn4EfUbSPUWtdDF5VzeDi.svg)](https://asciinema.org/a/dZOKxn4EfUbSPUWtdDF5VzeDi)

3、Systemed实战篇学习

1&2&3： [![asciicast](https://asciinema.org/a/UKnqGIW7e4WzMyjq7Msra17hA.svg)](https://asciinema.org/a/UKnqGIW7e4WzMyjq7Msra17hA)

4-9：[![asciicast](https://asciinema.org/a/IYxPNW4Lq2lj3DbnM18lAOQ0a.svg)](https://asciinema.org/a/IYxPNW4Lq2lj3DbnM18lAOQ0a)

## 四、自查清单

1、如何添加一个用户并使其具备sudo执行程序的权限？

```
sudo adduser XXX 
sudo usermod -G sudo -a XXX
```

2、如何将一个用户添加到一个用户组？

```
usermod -a -G
```

3、如何查看当前系统的分区表和文件系统详细信息？

```
fdisk -l 
df -h
```

4、如何实现开机自动挂载Virtualbox的共享目录分区？

```
//在文件 /etc/rc.local 中（用root用户）加如下命令
mount -t vboxsf java /mnt/share
```

5、基于LVM（逻辑分卷管理）的分区如何实现动态扩容和缩减容量？

```
lvextend -L [+] xG PATH
lvreduce -L [-] xG PATH
```

6、如何通过systemd设置实现在网络连通时运行一个指定脚本，在网络断开时运行另一个脚本？

ExecStartPost指定在启动执行ExecStart的命令后的收尾工作，可以有多个

ExecStopPost指定在ExecStop命令执行后的收尾工作，也可以有多个。

因此，要设置： ExecStartPost=网络连通时运行的指定脚本的路径 ExecStopPost =网络断开时运行的指定脚本的路径

7、如何通过systemd设置实现一个脚本在任何情况下被杀死之后会立即重新启动？实现杀不死？

[Service] Restart=always systemctl start [进程名]

## 参考资料

Systemed入门篇：http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html

Systemed实战篇：http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-part-two.html

